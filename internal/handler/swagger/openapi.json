{"components":{"requestBodies":{"AddFriendReq":{"content":{"application/json":{"schema":{"properties":{"revId":{"type":"string"},"uuid":{"type":"string"}},"required":["uuid","revId"],"title":"AddFriendReq","type":"object"}}},"required":true},"AddMembersReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"memberUuids":{"items":{"type":"string"},"nullable":true,"type":"array"}},"required":["UUID","conversationId","memberUuids"],"title":"AddMembersReq","type":"object"}}},"required":true},"AuthCheckReq":{"content":{"application/json":{"schema":{"properties":{"Token":{"type":"string"},"ValidPath":{"type":"string"}},"required":["Token","ValidPath"],"title":"AuthCheckReq","type":"object"}}},"required":true},"CreateGroupConversationReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"memberUuids":{"items":{"type":"string"},"nullable":true,"type":"array"},"name":{"type":"string"}},"required":["UUID","name","memberUuids"],"title":"CreateGroupConversationReq","type":"object"}}},"required":true},"CreatePrivateConversationReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"peerUuid":{"type":"string"}},"required":["UUID","peerUuid"],"title":"CreatePrivateConversationReq","type":"object"}}},"required":true},"EmailCodeReq":{"content":{"application/json":{"schema":{"properties":{"code":{"type":"string"},"email":{"type":"string"}},"required":["code","email"],"title":"EmailCodeReq","type":"object"}}},"required":true},"EmailPasswordLoginReq":{"content":{"application/json":{"schema":{"properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"],"title":"EmailPasswordLoginReq","type":"object"}}},"required":true},"EmailPasswordRegisterReq":{"content":{"application/json":{"schema":{"properties":{"code":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password","code"],"title":"EmailPasswordRegisterReq","type":"object"}}},"required":true},"GetConversationDetailReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"}},"required":["UUID","conversationId"],"title":"GetConversationDetailReq","type":"object"}}},"required":true},"GetConversationsReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"pageIndex":{"default":1,"format":"int","type":"integer"},"pageSize":{"default":10,"format":"int","type":"integer"}},"required":["UUID"],"title":"GetConversationsReq","type":"object"}}},"required":true},"GetEmailCodeReq":{"content":{"application/json":{"schema":{"properties":{"email":{"type":"string"}},"required":["email"],"title":"GetEmailCodeReq","type":"object"}}},"required":true},"GetFriendListReq":{"content":{"application/json":{"schema":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"GetFriendListReq","type":"object"}}},"required":true},"GetMessagesReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"afterId":{"format":"uint64","type":"integer"},"beforeId":{"format":"uint64","type":"integer"},"conversationId":{"format":"uint32","type":"integer"},"limit":{"default":20,"format":"int","type":"integer"}},"required":["UUID","conversationId"],"title":"GetMessagesReq","type":"object"}}},"required":true},"GetUnreadCountsReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"}},"required":["UUID"],"title":"GetUnreadCountsReq","type":"object"}}},"required":true},"ReadMessagesReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"upToMessageId":{"format":"uint64","type":"integer"}},"required":["UUID","conversationId","upToMessageId"],"title":"ReadMessagesReq","type":"object"}}},"required":true},"RecallMessageReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"messageId":{"format":"uint64","type":"integer"}},"required":["UUID","conversationId","messageId"],"title":"RecallMessageReq","type":"object"}}},"required":true},"RemoveMemberReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"removeUuid":{"type":"string"}},"required":["UUID","conversationId","removeUuid"],"title":"RemoveMemberReq","type":"object"}}},"required":true},"SearchUserReq":{"content":{"application/json":{"schema":{"properties":{"email":{"type":"string"}},"required":["email"],"title":"SearchUserReq","type":"object"}}},"required":true},"SendMessageReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"clientMsgId":{"type":"string"},"content":{"type":"string"},"contentExtra":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"mentionedUuids":{"items":{"type":"string"},"nullable":true,"type":"array"},"msgType":{"description":"// 1文本、2图片、3语音、4视频、5文件、6系统","format":"uint32","type":"integer"},"replyToMessageId":{"format":"uint64","type":"integer"}},"required":["UUID","conversationId","clientMsgId","msgType","content"],"title":"SendMessageReq","type":"object"}}},"required":true},"UpdateConversationSettingsReq":{"content":{"application/json":{"schema":{"properties":{"UUID":{"type":"string"},"alias":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"isPinned":{"description":"// 0/1","format":"uint32","type":"integer"},"muteUntil":{"type":"string"}},"required":["UUID","conversationId"],"title":"UpdateConversationSettingsReq","type":"object"}}},"required":true},"ValidFriendListReq":{"content":{"application/json":{"schema":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"ValidFriendListReq","type":"object"}}},"required":true},"ValidFriendReq":{"content":{"application/json":{"schema":{"properties":{"status":{"description":"// 接受还是拒绝","format":"uint32","type":"integer"},"uuid":{"description":"// 操作人id，一般是接受者操作","type":"string"},"verifyId":{"description":"// 验证表的id","format":"uint32","type":"integer"}},"required":["uuid","verifyId","status"],"title":"ValidFriendReq","type":"object"}}},"required":true}},"responses":{"AuthCheckResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthCheckResp"}}},"description":"A successful response."},"ConversationInfo":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationInfo"}}},"description":"A successful response."},"EmailCodeResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailCodeResp"}}},"description":"A successful response."},"EmailPasswordLoginResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailPasswordLoginResp"}}},"description":"A successful response."},"EmailPasswordRegisterResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailPasswordRegisterResp"}}},"description":"A successful response."},"GetConversationDetailResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetConversationDetailResp"}}},"description":"A successful response."},"GetConversationsResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetConversationsResp"}}},"description":"A successful response."},"GetEmailCodeResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetEmailCodeResp"}}},"description":"A successful response."},"GetFriendListResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetFriendListResp"}}},"description":"A successful response."},"GetMessagesResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMessagesResp"}}},"description":"A successful response."},"GetUnreadCountsResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUnreadCountsResp"}}},"description":"A successful response."},"ReadMessagesResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadMessagesResp"}}},"description":"A successful response."},"SearchUserResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchUserResp"}}},"description":"A successful response."},"SendMessageResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendMessageResp"}}},"description":"A successful response."},"ValidFriendListResp":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidFriendListResp"}}},"description":"A successful response."},"VersionResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VersionResponse"}}},"description":"A successful response."}},"schemas":{"AuthCheckResp":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"AuthCheckResp","type":"object"},"ConversationInfo":{"properties":{"avatar":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"extra":{"type":"string"},"lastMessageId":{"format":"uint64","type":"integer"},"memberCount":{"format":"uint32","type":"integer"},"name":{"type":"string"},"privateKey":{"type":"string"},"type":{"description":"// 1:单聊 2:群聊","format":"uint32","type":"integer"}},"required":["conversationId","type","privateKey","name","memberCount","lastMessageId","avatar","extra"],"title":"ConversationInfo","type":"object"},"ConversationMember":{"properties":{"alias":{"type":"string"},"isPinned":{"description":"// 0/1","format":"uint32","type":"integer"},"muteUntil":{"description":"// RFC3339 字符串","type":"string"},"role":{"format":"uint32","type":"integer"},"userUuid":{"type":"string"}},"required":["userUuid","role","alias","muteUntil","isPinned"],"title":"ConversationMember","type":"object"},"EmailCodeResp":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"EmailCodeResp","type":"object"},"EmailPasswordLoginResp":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"EmailPasswordLoginResp","type":"object"},"EmailPasswordRegisterResp":{"properties":{"uuid":{"type":"string"}},"required":["uuid"],"title":"EmailPasswordRegisterResp","type":"object"},"FriendInfo":{"properties":{"notice":{"type":"string"},"uuid":{"type":"string"}},"required":["uuid","notice"],"title":"FriendInfo","type":"object"},"GetConversationDetailResp":{"properties":{"info":{"$ref":"#/components/schemas/ConversationInfo"},"members":{"items":{"$ref":"#/components/schemas/ConversationMember"},"nullable":true,"type":"array"}},"required":["info","members"],"title":"GetConversationDetailResp","type":"object"},"GetConversationsResp":{"properties":{"conversations":{"items":{"$ref":"#/components/schemas/ConversationInfo"},"nullable":true,"type":"array"}},"required":["conversations"],"title":"GetConversationsResp","type":"object"},"GetEmailCodeResp":{"properties":{"code":{"type":"string"}},"required":["code"],"title":"GetEmailCodeResp","type":"object"},"GetFriendListResp":{"properties":{"friends":{"items":{"$ref":"#/components/schemas/FriendInfo"},"nullable":true,"type":"array"}},"required":["friends"],"title":"GetFriendListResp","type":"object"},"GetMessagesResp":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/MessageInfo"},"nullable":true,"type":"array"}},"required":["messages"],"title":"GetMessagesResp","type":"object"},"GetUnreadCountsResp":{"properties":{"items":{"items":{"$ref":"#/components/schemas/UnreadItem"},"nullable":true,"type":"array"}},"required":["items"],"title":"GetUnreadCountsResp","type":"object"},"MessageInfo":{"properties":{"content":{"type":"string"},"contentExtra":{"type":"string"},"conversationId":{"format":"uint32","type":"integer"},"createdAt":{"type":"string"},"id":{"format":"uint64","type":"integer"},"isRevoked":{"description":"// 0/1","format":"uint32","type":"integer"},"isSystem":{"description":"// 0/1","format":"uint32","type":"integer"},"mentionedUuids":{"items":{"type":"string"},"nullable":true,"type":"array"},"msgType":{"format":"uint32","type":"integer"},"replyToMessageId":{"format":"uint64","type":"integer"},"sendUuid":{"type":"string"}},"required":["id","conversationId","sendUuid","msgType","content","contentExtra","replyToMessageId","mentionedUuids","isSystem","isRevoked","createdAt"],"title":"MessageInfo","type":"object"},"ReadMessagesResp":{"properties":{"lastReadMessageId":{"format":"uint64","type":"integer"}},"required":["lastReadMessageId"],"title":"ReadMessagesResp","type":"object"},"SearchUserResp":{"properties":{"revId":{"type":"string"}},"required":["revId"],"title":"SearchUserResp","type":"object"},"SendMessageResp":{"properties":{"clientMsgId":{"type":"string"},"createdAt":{"type":"string"},"serverMsgId":{"format":"uint64","type":"integer"}},"required":["serverMsgId","clientMsgId","createdAt"],"title":"SendMessageResp","type":"object"},"UnreadItem":{"properties":{"conversationId":{"format":"uint32","type":"integer"},"unread":{"format":"uint32","type":"integer"}},"required":["conversationId","unread"],"title":"UnreadItem","type":"object"},"ValidFriendInfo":{"properties":{"id":{"format":"uint32","type":"integer"},"revId":{"type":"string"},"revStatus":{"format":"uint32","type":"integer"}},"required":["id","revId","revStatus"],"title":"ValidFriendInfo","type":"object"},"ValidFriendListResp":{"properties":{"valids":{"items":{"$ref":"#/components/schemas/ValidFriendInfo"},"nullable":true,"type":"array"}},"required":["valids"],"title":"ValidFriendListResp","type":"object"},"VersionResponse":{"properties":{"version":{"description":"//版本号","type":"string"}},"required":["version"],"title":"VersionResponse","type":"object"}},"securitySchemes":{"jwt":{"bearerFormat":"JWT","scheme":"bearer","type":"http"}}},"info":{"description":"imy server swagger API","title":"imy API","version":"v1.0"},"openapi":"3.0.3","paths":{"/api/auth/authCheck":{"post":{"operationId":"AuthCheck","requestBody":{"$ref":"#/components/requestBodies/AuthCheckReq"},"responses":{"200":{"$ref":"#/components/responses/AuthCheckResp"}},"summary":"身份验证","tags":["auth"]}},"/api/auth/emailCode":{"post":{"operationId":"EmailCode","requestBody":{"$ref":"#/components/requestBodies/EmailCodeReq"},"responses":{"200":{"$ref":"#/components/responses/EmailCodeResp"}},"tags":["auth"]}},"/api/auth/emailPasswordLogin":{"post":{"operationId":"EmailPasswordLogin","requestBody":{"$ref":"#/components/requestBodies/EmailPasswordLoginReq"},"responses":{"200":{"$ref":"#/components/responses/EmailPasswordLoginResp"}},"summary":"邮箱密码登陆","tags":["auth"]}},"/api/auth/emailPasswordRegister":{"post":{"operationId":"EmailPasswordRegister","requestBody":{"$ref":"#/components/requestBodies/EmailPasswordRegisterReq"},"responses":{"200":{"$ref":"#/components/responses/EmailPasswordRegisterResp"}},"summary":"邮箱密码注册","tags":["auth"]}},"/api/auth/getEmailCode":{"post":{"operationId":"GetEmailCode","requestBody":{"$ref":"#/components/requestBodies/GetEmailCodeReq"},"responses":{"200":{"$ref":"#/components/responses/GetEmailCodeResp"}},"summary":"获取邮箱验证码","tags":["auth"]}},"/api/chat/addMembers":{"post":{"operationId":"AddMembers","requestBody":{"$ref":"#/components/requestBodies/AddMembersReq"},"responses":{"200":{"description":"A successful response."}},"summary":"群聊添加成员","tags":["chat"]}},"/api/chat/createGroup":{"post":{"operationId":"CreateGroupConversation","requestBody":{"$ref":"#/components/requestBodies/CreateGroupConversationReq"},"responses":{"200":{"$ref":"#/components/responses/ConversationInfo"}},"summary":"创建群聊","tags":["chat"]}},"/api/chat/createPrivate":{"post":{"operationId":"CreatePrivateConversation","requestBody":{"$ref":"#/components/requestBodies/CreatePrivateConversationReq"},"responses":{"200":{"$ref":"#/components/responses/ConversationInfo"}},"summary":"创建或获取单聊会话","tags":["chat"]}},"/api/chat/getConversationDetail":{"post":{"operationId":"GetConversationDetail","requestBody":{"$ref":"#/components/requestBodies/GetConversationDetailReq"},"responses":{"200":{"$ref":"#/components/responses/GetConversationDetailResp"}},"summary":"获取会话详情","tags":["chat"]}},"/api/chat/getConversations":{"post":{"operationId":"GetConversations","requestBody":{"$ref":"#/components/requestBodies/GetConversationsReq"},"responses":{"200":{"$ref":"#/components/responses/GetConversationsResp"}},"summary":"获取我的会话列表","tags":["chat"]}},"/api/chat/getMessages":{"post":{"operationId":"GetMessages","requestBody":{"$ref":"#/components/requestBodies/GetMessagesReq"},"responses":{"200":{"$ref":"#/components/responses/GetMessagesResp"}},"summary":"拉取历史消息","tags":["chat"]}},"/api/chat/getUnreadCounts":{"post":{"operationId":"GetUnreadCounts","requestBody":{"$ref":"#/components/requestBodies/GetUnreadCountsReq"},"responses":{"200":{"$ref":"#/components/responses/GetUnreadCountsResp"}},"summary":"获取未读计数","tags":["chat"]}},"/api/chat/readMessages":{"post":{"operationId":"ReadMessages","requestBody":{"$ref":"#/components/requestBodies/ReadMessagesReq"},"responses":{"200":{"$ref":"#/components/responses/ReadMessagesResp"}},"summary":"上报已读进度","tags":["chat"]}},"/api/chat/recallMessage":{"post":{"operationId":"RecallMessage","requestBody":{"$ref":"#/components/requestBodies/RecallMessageReq"},"responses":{"200":{"description":"A successful response."}},"summary":"撤回消息","tags":["chat"]}},"/api/chat/removeMember":{"post":{"operationId":"RemoveMember","requestBody":{"$ref":"#/components/requestBodies/RemoveMemberReq"},"responses":{"200":{"description":"A successful response."}},"summary":"群聊移除成员/退群","tags":["chat"]}},"/api/chat/sendMessage":{"post":{"operationId":"SendMessage","requestBody":{"$ref":"#/components/requestBodies/SendMessageReq"},"responses":{"200":{"$ref":"#/components/responses/SendMessageResp"}},"summary":"发送消息","tags":["chat"]}},"/api/chat/updateSettings":{"post":{"operationId":"UpdateConversationSettings","requestBody":{"$ref":"#/components/requestBodies/UpdateConversationSettingsReq"},"responses":{"200":{"description":"A successful response."}},"summary":"更新个人会话设置","tags":["chat"]}},"/api/friend/addFriend":{"post":{"operationId":"AddFriend","requestBody":{"$ref":"#/components/requestBodies/AddFriendReq"},"responses":{"200":{"description":"A successful response."}},"summary":"添加好友","tags":["friend"]}},"/api/friend/getFriendList":{"post":{"operationId":"GetFriendList","requestBody":{"$ref":"#/components/requestBodies/GetFriendListReq"},"responses":{"200":{"$ref":"#/components/responses/GetFriendListResp"}},"summary":"获取好友列表","tags":["friend"]}},"/api/friend/searchUser":{"post":{"operationId":"SearchUser","requestBody":{"$ref":"#/components/requestBodies/SearchUserReq"},"responses":{"200":{"$ref":"#/components/responses/SearchUserResp"}},"summary":"搜索用户","tags":["friend"]}},"/api/friend/validFriend":{"post":{"operationId":"ValidFriend","requestBody":{"$ref":"#/components/requestBodies/ValidFriendReq"},"responses":{"200":{"description":"A successful response."}},"summary":"处理好友验证","tags":["friend"]}},"/api/friend/validFriendList":{"post":{"operationId":"ValidFriendList","requestBody":{"$ref":"#/components/requestBodies/ValidFriendListReq"},"responses":{"200":{"$ref":"#/components/responses/ValidFriendListResp"}},"summary":"获取好友验证表","tags":["friend"]}},"/api/version":{"get":{"operationId":"Version","responses":{"200":{"$ref":"#/components/responses/VersionResponse"}},"summary":"版本信息","tags":["version"]}}},"security":[{"jwt":[]}]}
